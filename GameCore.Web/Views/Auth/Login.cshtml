@{
    ViewData["Title"] = "ç™»å…¥ - GameCore";
    Layout = "~/Views/Shared/_AuthLayout.cshtml";
}

<!-- ç™»å…¥é é¢ - éµå¾ªä½¿ç”¨è€…æä¾›çš„è¨­è¨ˆé¢¨æ ¼ -->
<div class="auth-container">
    <div class="auth-card">
        <div class="auth-header">
            <div class="logo-section">
                <div class="logo-badge">GC</div>
                <h1 class="logo-text">GameCore</h1>
            </div>
            <p class="auth-subtitle">æ­¡è¿å›ä¾†ï¼ç™»å…¥æ‚¨çš„éŠæˆ²å¸³æˆ¶</p>
        </div>

        <!-- ç™»å…¥è¡¨å–® -->
        <form id="loginForm" class="auth-form">
            <div class="form-group">
                <label for="email" class="form-label">é›»å­éƒµä»¶ / å¸³è™Ÿ</label>
                <input type="text" id="email" name="email" class="form-input" 
                       placeholder="è«‹è¼¸å…¥æ‚¨çš„é›»å­éƒµä»¶æˆ–å¸³è™Ÿ" required>
                <div class="error-message" id="emailError"></div>
            </div>

            <div class="form-group">
                <label for="password" class="form-label">å¯†ç¢¼</label>
                <div class="password-input-container">
                    <input type="password" id="password" name="password" class="form-input" 
                           placeholder="è«‹è¼¸å…¥å¯†ç¢¼" required>
                    <button type="button" class="password-toggle" id="passwordToggle">
                        <i class="icon-eye" id="eyeIcon">ğŸ‘ï¸</i>
                    </button>
                </div>
                <div class="error-message" id="passwordError"></div>
            </div>

            <div class="form-options">
                <label class="checkbox-container">
                    <input type="checkbox" id="rememberMe" name="rememberMe">
                    <span class="checkmark"></span>
                    è¨˜ä½æˆ‘
                </label>
                <a href="/Auth/ForgotPassword" class="forgot-link">å¿˜è¨˜å¯†ç¢¼ï¼Ÿ</a>
            </div>

            <button type="submit" class="btn-primary btn-full" id="loginBtn">
                <span class="btn-text">ç™»å…¥</span>
                <div class="loading-spinner" id="loginSpinner"></div>
            </button>

            <div class="form-divider">
                <span>æˆ–ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ç™»å…¥</span>
            </div>

            <!-- OAuth ç™»å…¥æŒ‰éˆ• -->
            <div class="oauth-buttons">
                <button type="button" class="btn-oauth btn-google" id="googleLogin">
                    <svg class="oauth-icon" viewBox="0 0 24 24">
                        <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                        <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                        <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                        <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                    </svg>
                    Google ç™»å…¥
                </button>

                <button type="button" class="btn-oauth btn-facebook" id="facebookLogin">
                    <svg class="oauth-icon" viewBox="0 0 24 24">
                        <path fill="#1877F2" d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                    </svg>
                    Facebook ç™»å…¥
                </button>

                <button type="button" class="btn-oauth btn-discord" id="discordLogin">
                    <svg class="oauth-icon" viewBox="0 0 24 24">
                        <path fill="#5865F2" d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.0189 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1568 2.4189Z"/>
                    </svg>
                    Discord ç™»å…¥
                </button>
            </div>
        </form>

        <!-- è¨»å†Šé€£çµ -->
        <div class="auth-footer">
            <p>é‚„æ²’æœ‰å¸³æˆ¶ï¼Ÿ <a href="/Auth/Register" class="register-link">ç«‹å³è¨»å†Š</a></p>
        </div>
    </div>

    <!-- èƒŒæ™¯è£é£¾ -->
    <div class="auth-background">
        <div class="floating-shape shape-1"></div>
        <div class="floating-shape shape-2"></div>
        <div class="floating-shape shape-3"></div>
    </div>
</div>

<!-- Toast é€šçŸ¥ -->
<div id="toastContainer" class="toast-container"></div>

@section Scripts {
    <script src="~/js/auth/login.js"></script>
}

<style>
/* ç™»å…¥é é¢å°ˆç”¨æ¨£å¼ - éµå¾ªä½¿ç”¨è€…æä¾›çš„ç»ç’ƒé¢¨æ ¼ */
.auth-container {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: 
        radial-gradient(900px 500px at -10% -10%, rgba(117,87,255,.10), transparent 60%), 
        radial-gradient(800px 460px at 110% 10%, rgba(52,210,255,.10), transparent 50%), 
        linear-gradient(180deg, var(--bg), var(--bg2));
    padding: 20px;
    position: relative;
    overflow: hidden;
}

.auth-card {
    background: var(--glass);
    backdrop-filter: saturate(140%) blur(var(--blur));
    border: 1px solid var(--line);
    border-radius: var(--radius);
    padding: 32px;
    width: 100%;
    max-width: 420px;
    box-shadow: var(--shadow);
    position: relative;
    z-index: 10;
}

.auth-header {
    text-align: center;
    margin-bottom: 32px;
}

.logo-section {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    margin-bottom: 16px;
}

.logo-badge {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    background: linear-gradient(135deg, var(--accent), var(--accent-2));
    color: #fff;
    display: grid;
    place-items: center;
    font-weight: 900;
    font-size: 18px;
    box-shadow: var(--shadow);
}

.logo-text {
    font-size: 28px;
    font-weight: 900;
    color: var(--ink);
    margin: 0;
}

.auth-subtitle {
    color: var(--muted);
    margin: 0;
    font-size: 14px;
}

.form-group {
    margin-bottom: 20px;
}

.form-label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: var(--ink);
    font-size: 14px;
}

.form-input {
    width: 100%;
    padding: 12px 16px;
    border: 1px solid var(--line);
    border-radius: var(--radius-sm);
    background: var(--surface);
    color: var(--ink);
    font-size: 14px;
    transition: all 0.2s ease;
    backdrop-filter: blur(var(--blur));
}

.form-input:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(117, 87, 255, 0.1);
}

.password-input-container {
    position: relative;
}

.password-toggle {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    cursor: pointer;
    color: var(--muted);
    padding: 4px;
}

.form-options {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
}

.checkbox-container {
    display: flex;
    align-items: center;
    cursor: pointer;
    font-size: 14px;
    color: var(--ink);
}

.checkbox-container input {
    margin-right: 8px;
}

.forgot-link {
    color: var(--accent);
    text-decoration: none;
    font-size: 14px;
    font-weight: 500;
}

.forgot-link:hover {
    text-decoration: underline;
}

.btn-primary {
    width: 100%;
    padding: 14px 20px;
    background: linear-gradient(135deg, var(--accent), #3b82f6);
    border: none;
    border-radius: var(--radius-sm);
    color: white;
    font-weight: 600;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--shadow);
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(117, 87, 255, 0.3);
}

.btn-primary:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
}

.loading-spinner {
    width: 16px;
    height: 16px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-top: 2px solid white;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-left: 8px;
    display: none;
}

.btn-primary.loading .btn-text {
    opacity: 0.7;
}

.btn-primary.loading .loading-spinner {
    display: block;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.form-divider {
    text-align: center;
    margin: 24px 0;
    position: relative;
    color: var(--muted);
    font-size: 12px;
}

.form-divider::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 1px;
    background: var(--line);
    z-index: 1;
}

.form-divider span {
    background: var(--glass);
    padding: 0 16px;
    position: relative;
    z-index: 2;
}

.oauth-buttons {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.btn-oauth {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 12px 16px;
    border: 1px solid var(--line);
    border-radius: var(--radius-sm);
    background: var(--surface);
    color: var(--ink);
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    backdrop-filter: blur(var(--blur));
}

.btn-oauth:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow);
}

.oauth-icon {
    width: 20px;
    height: 20px;
}

.auth-footer {
    text-align: center;
    margin-top: 24px;
    font-size: 14px;
    color: var(--muted);
}

.register-link {
    color: var(--accent);
    text-decoration: none;
    font-weight: 600;
}

.register-link:hover {
    text-decoration: underline;
}

.error-message {
    color: var(--error-color, #ef4444);
    font-size: 12px;
    margin-top: 4px;
    display: none;
}

.error-message.show {
    display: block;
}

/* èƒŒæ™¯è£é£¾å‹•ç•« */
.auth-background {
    position: absolute;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
}

.floating-shape {
    position: absolute;
    border-radius: 50%;
    opacity: 0.1;
    animation: float 6s ease-in-out infinite;
}

.shape-1 {
    width: 100px;
    height: 100px;
    background: var(--accent);
    top: 20%;
    left: 10%;
    animation-delay: 0s;
}

.shape-2 {
    width: 150px;
    height: 150px;
    background: var(--accent-2);
    top: 60%;
    right: 15%;
    animation-delay: 2s;
}

.shape-3 {
    width: 80px;
    height: 80px;
    background: var(--accent-3);
    bottom: 20%;
    left: 60%;
    animation-delay: 4s;
}

@keyframes float {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    50% { transform: translateY(-20px) rotate(180deg); }
}

/* Toast é€šçŸ¥æ¨£å¼ */
.toast-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1000;
}

.toast {
    background: var(--glass);
    backdrop-filter: blur(var(--blur));
    border: 1px solid var(--line);
    border-radius: var(--radius-sm);
    padding: 16px 20px;
    margin-bottom: 12px;
    box-shadow: var(--shadow);
    max-width: 350px;
    animation: slideIn 0.3s ease;
}

.toast.success {
    border-left: 4px solid var(--success-color, #10b981);
}

.toast.error {
    border-left: 4px solid var(--error-color, #ef4444);
}

@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* éŸ¿æ‡‰å¼è¨­è¨ˆ */
@media (max-width: 480px) {
    .auth-card {
        padding: 24px;
        margin: 16px;
    }
    
    .logo-text {
        font-size: 24px;
    }
    
    .oauth-buttons {
        gap: 8px;
    }
    
    .btn-oauth {
        padding: 10px 14px;
        font-size: 13px;
    }
}
</style>