@{
    ViewData["Title"] = "æˆ‘çš„éŒ¢åŒ…";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"] | GameCore</title>
    <style>
        /* ç¹¼æ‰¿ä¸»è¦è¨­è¨ˆç³»çµ±è®Šæ•¸ */
        :root {
            --bg: #eef3f8;
            --bg2: #ffffff;
            --ink: #1f2937;
            --muted: #64748b;
            --line: #e5e7eb;
            --surface: rgba(255,255,255,.75);
            --glass: rgba(255,255,255,.45);
            --accent: #7557ff;
            --accent-2: #34d2ff;
            --accent-3: #22c55e;
            --radius: 18px;
            --radius-sm: 12px;
            --shadow: 0 18px 40px rgba(17,24,39,.12);
            --blur: 14px;
        }

        body.dark {
            --bg: #0c111b;
            --bg2: #0a0f18;
            --ink: #e5edff;
            --muted: #9fb1c9;
            --line: #1e2b43;
            --surface: rgba(22,30,48,.65);
            --glass: rgba(18,24,39,.50);
            --shadow: 0 18px 42px rgba(0,0,0,.35);
        }

        .wallet-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: radial-gradient(900px 500px at -10% -10%, rgba(117,87,255,.10), transparent 60%),
                        radial-gradient(800px 460px at 110% 10%, rgba(52,210,255,.10), transparent 50%),
                        linear-gradient(180deg, var(--bg), var(--bg2));
            min-height: 100vh;
            color: var(--ink);
            font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans TC", sans-serif;
        }

        .wallet-header {
            background: var(--glass);
            border: 1px solid var(--line);
            border-radius: var(--radius);
            padding: 24px;
            margin-bottom: 24px;
            backdrop-filter: blur(var(--blur));
            box-shadow: var(--shadow);
        }

        .balance-display {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }

        .balance-amount {
            font-size: 2.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--accent), var(--accent-2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .balance-label {
            color: var(--muted);
            font-size: 0.875rem;
            font-weight: 600;
        }

        .wallet-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .stat-card {
            background: var(--surface);
            border: 1px solid var(--line);
            border-radius: var(--radius-sm);
            padding: 16px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent-3);
        }

        .stat-label {
            color: var(--muted);
            font-size: 0.75rem;
            margin-top: 4px;
        }

        .section-card {
            background: var(--glass);
            border: 1px solid var(--line);
            border-radius: var(--radius);
            padding: 24px;
            margin-bottom: 24px;
            backdrop-filter: blur(var(--blur));
            box-shadow: var(--shadow);
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            border: 1px solid var(--line);
            background: var(--surface);
            border-radius: var(--radius-sm);
            color: var(--ink);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn.primary {
            background: linear-gradient(135deg, var(--accent), var(--accent-2));
            color: white;
            border: none;
        }

        .btn.success {
            background: linear-gradient(135deg, var(--accent-3), #16a34a);
            color: white;
            border: none;
        }

        .ledger-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--surface);
            border-radius: var(--radius-sm);
            overflow: hidden;
        }

        .ledger-table th,
        .ledger-table td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid var(--line);
        }

        .ledger-table th {
            background: var(--bg2);
            font-weight: 600;
            color: var(--muted);
            font-size: 0.875rem;
        }

        .transaction-type {
            padding: 4px 8px;
            border-radius: 999px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .type-signin { background: #dbeafe; color: #1e40af; }
        .type-minigame { background: #dcfce7; color: #166534; }
        .type-pet_color { background: #fef3c7; color: #92400e; }
        .type-adjustment { background: #fce7f3; color: #be185d; }

        .amount-positive {
            color: var(--accent-3);
            font-weight: 600;
        }

        .amount-negative {
            color: #ef4444;
            font-weight: 600;
        }

        .filter-controls {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .filter-input {
            padding: 8px 12px;
            border: 1px solid var(--line);
            border-radius: var(--radius-sm);
            background: var(--surface);
            color: var(--ink);
        }

        .pagination {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 16px;
        }

        .pagination button {
            padding: 8px 12px;
            border: 1px solid var(--line);
            background: var(--surface);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .pagination button:hover {
            background: var(--accent);
            color: white;
        }

        .pagination button.active {
            background: var(--accent);
            color: white;
        }

        .sales-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        @media (max-width: 768px) {
            .sales-section {
                grid-template-columns: 1fr;
            }
            
            .wallet-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: var(--muted);
        }

        .error {
            background: #fef2f2;
            border: 1px solid #fecaca;
            color: #dc2626;
            padding: 12px 16px;
            border-radius: var(--radius-sm);
            margin-bottom: 16px;
        }

        .success {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            color: #166534;
            padding: 12px 16px;
            border-radius: var(--radius-sm);
            margin-bottom: 16px;
        }
    </style>
</head>
<body>
    <div class="wallet-container">
        <!-- éŒ¢åŒ…æ¦‚è¦½ -->
        <div class="wallet-header">
            <div class="balance-display">
                <div>
                    <div class="balance-label">ç›®å‰é»æ•¸é¤˜é¡</div>
                    <div class="balance-amount" id="currentBalance">è¼‰å…¥ä¸­...</div>
                </div>
                <div style="margin-left: auto;">
                    <button class="btn primary" onclick="refreshWallet()">
                        ğŸ”„ é‡æ–°æ•´ç†
                    </button>
                </div>
            </div>

            <div class="wallet-stats">
                <div class="stat-card">
                    <div class="stat-value" id="todayEarned">0</div>
                    <div class="stat-label">ä»Šæ—¥ç²å¾—</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="todaySpent">0</div>
                    <div class="stat-label">ä»Šæ—¥æ¶ˆè²»</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="monthEarned">0</div>
                    <div class="stat-label">æœ¬æœˆç²å¾—</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="monthSpent">0</div>
                    <div class="stat-label">æœ¬æœˆæ¶ˆè²»</div>
                </div>
            </div>
        </div>

        <!-- æ”¶æ”¯æ˜ç´° -->
        <div class="section-card">
            <div class="section-title">
                ğŸ“Š æ”¶æ”¯æ˜ç´°
            </div>

            <div class="filter-controls">
                <select class="filter-input" id="transactionTypeFilter">
                    <option value="">æ‰€æœ‰é¡å‹</option>
                    <option value="signin">æ¯æ—¥ç°½åˆ°</option>
                    <option value="minigame">å°éŠæˆ²</option>
                    <option value="pet_color">å¯µç‰©æ›è‰²</option>
                    <option value="adjustment">ç®¡ç†èª¿æ•´</option>
                </select>
                
                <input type="date" class="filter-input" id="fromDate" placeholder="é–‹å§‹æ—¥æœŸ">
                <input type="date" class="filter-input" id="toDate" placeholder="çµæŸæ—¥æœŸ">
                
                <button class="btn" onclick="filterTransactions()">ç¯©é¸</button>
                <button class="btn" onclick="resetFilters()">é‡è¨­</button>
            </div>

            <div id="transactionList">
                <div class="loading">è¼‰å…¥ä¸­...</div>
            </div>

            <div class="pagination" id="pagination"></div>
        </div>

        <!-- éŠ·å”®åŠŸèƒ½ -->
        <div class="sales-section">
            <!-- éŠ·å”®æª”æ¡ˆ -->
            <div class="section-card">
                <div class="section-title">
                    ğŸª éŠ·å”®åŠŸèƒ½
                </div>
                
                <div id="salesProfile">
                    <div class="loading">è¼‰å…¥ä¸­...</div>
                </div>
                
                <div style="margin-top: 16px;">
                    <button class="btn success" onclick="applySalesProfile()" id="applyBtn">
                        ç”³è«‹éŠ·å”®åŠŸèƒ½
                    </button>
                </div>
            </div>

            <!-- éŠ·å”®éŒ¢åŒ… -->
            <div class="section-card">
                <div class="section-title">
                    ğŸ’° éŠ·å”®éŒ¢åŒ…
                </div>
                
                <div id="salesWallet">
                    <div class="loading">è¼‰å…¥ä¸­...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ç”³è«‹éŠ·å”®åŠŸèƒ½å°è©±æ¡† -->
    <div id="salesModal" style="display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
        <div style="background: var(--surface); border-radius: var(--radius); padding: 24px; max-width: 500px; width: 90%;">
            <h3 style="margin-top: 0;">ç”³è«‹éŠ·å”®åŠŸèƒ½</h3>
            
            <form id="salesForm">
                <div style="margin-bottom: 16px;">
                    <label style="display: block; margin-bottom: 4px; font-weight: 600;">éŠ€è¡Œä»£è™Ÿ</label>
                    <select id="bankCode" class="filter-input" style="width: 100%;" required>
                        <option value="">è«‹é¸æ“‡éŠ€è¡Œ</option>
                        <option value="1">å°ç£éŠ€è¡Œ (001)</option>
                        <option value="3">åœŸåœ°éŠ€è¡Œ (003)</option>
                        <option value="4">åˆä½œé‡‘åº« (004)</option>
                        <option value="5">ç¬¬ä¸€éŠ€è¡Œ (005)</option>
                        <option value="6">è¯å—éŠ€è¡Œ (006)</option>
                        <option value="7">å½°åŒ–éŠ€è¡Œ (007)</option>
                        <option value="11">å°åŒ—å¯Œé‚¦ (011)</option>
                        <option value="12">å°æ–°éŠ€è¡Œ (012)</option>
                    </select>
                </div>
                
                <div style="margin-bottom: 16px;">
                    <label style="display: block; margin-bottom: 4px; font-weight: 600;">éŠ€è¡Œå¸³è™Ÿ</label>
                    <input type="text" id="bankAccount" class="filter-input" style="width: 100%;" 
                           placeholder="è«‹è¼¸å…¥éŠ€è¡Œå¸³è™Ÿ" required>
                </div>
                
                <div style="margin-bottom: 16px;">
                    <label style="display: block; margin-bottom: 4px; font-weight: 600;">ç”³è«‹ç†ç”±</label>
                    <textarea id="applicationReason" class="filter-input" style="width: 100%; height: 80px; resize: vertical;" 
                              placeholder="è«‹èªªæ˜ç”³è«‹éŠ·å”®åŠŸèƒ½çš„ç†ç”±"></textarea>
                </div>
                
                <div style="display: flex; gap: 12px; justify-content: flex-end;">
                    <button type="button" class="btn" onclick="closeSalesModal()">å–æ¶ˆ</button>
                    <button type="submit" class="btn primary">æäº¤ç”³è«‹</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // å…¨åŸŸè®Šæ•¸
        let currentPage = 1;
        let currentFilters = {};

        // é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadWalletData();
            loadStatistics();
            loadTransactionHistory();
            loadSalesProfile();
            loadSalesWallet();
        });

        // è¼‰å…¥éŒ¢åŒ…è³‡æ–™
        async function loadWalletData() {
            try {
                const response = await fetch('/api/wallet');
                const result = await response.json();
                
                if (result.success) {
                    document.getElementById('currentBalance').textContent = 
                        result.data.currentPoints.toLocaleString() + ' é»';
                } else {
                    document.getElementById('currentBalance').textContent = 'è¼‰å…¥å¤±æ•—';
                }
            } catch (error) {
                console.error('è¼‰å…¥éŒ¢åŒ…è³‡æ–™å¤±æ•—:', error);
                document.getElementById('currentBalance').textContent = 'è¼‰å…¥å¤±æ•—';
            }
        }

        // è¼‰å…¥çµ±è¨ˆè³‡æ–™
        async function loadStatistics() {
            try {
                const response = await fetch('/api/wallet/statistics');
                const result = await response.json();
                
                if (result.success) {
                    const stats = result.data;
                    document.getElementById('todayEarned').textContent = stats.todayEarned.toLocaleString();
                    document.getElementById('todaySpent').textContent = stats.todaySpent.toLocaleString();
                    document.getElementById('monthEarned').textContent = stats.monthEarned.toLocaleString();
                    document.getElementById('monthSpent').textContent = stats.monthSpent.toLocaleString();
                }
            } catch (error) {
                console.error('è¼‰å…¥çµ±è¨ˆè³‡æ–™å¤±æ•—:', error);
            }
        }

        // è¼‰å…¥äº¤æ˜“è¨˜éŒ„
        async function loadTransactionHistory(page = 1, filters = {}) {
            try {
                const params = new URLSearchParams({
                    page: page,
                    pageSize: 10,
                    ...filters
                });

                const response = await fetch(`/api/wallet/ledger?${params}`);
                const result = await response.json();
                
                if (result.success) {
                    renderTransactionList(result.data);
                    renderPagination(result.pagination);
                } else {
                    document.getElementById('transactionList').innerHTML = 
                        '<div class="error">è¼‰å…¥äº¤æ˜“è¨˜éŒ„å¤±æ•—</div>';
                }
            } catch (error) {
                console.error('è¼‰å…¥äº¤æ˜“è¨˜éŒ„å¤±æ•—:', error);
                document.getElementById('transactionList').innerHTML = 
                    '<div class="error">è¼‰å…¥äº¤æ˜“è¨˜éŒ„å¤±æ•—</div>';
            }
        }

        // æ¸²æŸ“äº¤æ˜“æ¸…å–®
        function renderTransactionList(transactions) {
            if (transactions.length === 0) {
                document.getElementById('transactionList').innerHTML = 
                    '<div style="text-align: center; padding: 40px; color: var(--muted);">æš«ç„¡äº¤æ˜“è¨˜éŒ„</div>';
                return;
            }

            const tableHtml = `
                <table class="ledger-table">
                    <thead>
                        <tr>
                            <th>æ™‚é–“</th>
                            <th>é¡å‹</th>
                            <th>æè¿°</th>
                            <th>é»æ•¸è®ŠåŒ–</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${transactions.map(tx => `
                            <tr>
                                <td>${new Date(tx.timestamp).toLocaleString('zh-TW')}</td>
                                <td><span class="transaction-type type-${tx.type}">${getTypeDisplayName(tx.type)}</span></td>
                                <td>${tx.description}</td>
                                <td class="${tx.pointsDelta > 0 ? 'amount-positive' : 'amount-negative'}">
                                    ${tx.pointsDelta > 0 ? '+' : ''}${tx.pointsDelta.toLocaleString()}
                                </td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
            
            document.getElementById('transactionList').innerHTML = tableHtml;
        }

        // æ¸²æŸ“åˆ†é 
        function renderPagination(pagination) {
            const paginationHtml = `
                <button onclick="loadTransactionHistory(1, currentFilters)" ${pagination.currentPage === 1 ? 'disabled' : ''}>
                    ç¬¬ä¸€é 
                </button>
                <button onclick="loadTransactionHistory(${pagination.currentPage - 1}, currentFilters)" 
                        ${!pagination.hasPreviousPage ? 'disabled' : ''}>
                    ä¸Šä¸€é 
                </button>
                <span style="padding: 8px 12px;">
                    ç¬¬ ${pagination.currentPage} é ï¼Œå…± ${pagination.totalPages} é 
                </span>
                <button onclick="loadTransactionHistory(${pagination.currentPage + 1}, currentFilters)" 
                        ${!pagination.hasNextPage ? 'disabled' : ''}>
                    ä¸‹ä¸€é 
                </button>
                <button onclick="loadTransactionHistory(${pagination.totalPages}, currentFilters)" 
                        ${pagination.currentPage === pagination.totalPages ? 'disabled' : ''}>
                    æœ€å¾Œé 
                </button>
            `;
            
            document.getElementById('pagination').innerHTML = paginationHtml;
        }

        // å–å¾—é¡å‹é¡¯ç¤ºåç¨±
        function getTypeDisplayName(type) {
            const typeNames = {
                'signin': 'æ¯æ—¥ç°½åˆ°',
                'minigame': 'å°éŠæˆ²',
                'pet_color': 'å¯µç‰©æ›è‰²',
                'adjustment': 'ç®¡ç†èª¿æ•´'
            };
            return typeNames[type] || type;
        }

        // ç¯©é¸äº¤æ˜“
        function filterTransactions() {
            const filters = {};
            
            const typeFilter = document.getElementById('transactionTypeFilter').value;
            if (typeFilter) filters.type = typeFilter;
            
            const fromDate = document.getElementById('fromDate').value;
            if (fromDate) filters.from = fromDate;
            
            const toDate = document.getElementById('toDate').value;
            if (toDate) filters.to = toDate;
            
            currentFilters = filters;
            currentPage = 1;
            loadTransactionHistory(1, filters);
        }

        // é‡è¨­ç¯©é¸æ¢ä»¶
        function resetFilters() {
            document.getElementById('transactionTypeFilter').value = '';
            document.getElementById('fromDate').value = '';
            document.getElementById('toDate').value = '';
            
            currentFilters = {};
            currentPage = 1;
            loadTransactionHistory(1, {});
        }

        // è¼‰å…¥éŠ·å”®æª”æ¡ˆ
        async function loadSalesProfile() {
            try {
                const response = await fetch('/api/wallet/sales/profile');
                
                if (response.status === 404) {
                    document.getElementById('salesProfile').innerHTML = 
                        '<div style="color: var(--muted);">å°šæœªç”³è«‹éŠ·å”®åŠŸèƒ½</div>';
                    return;
                }
                
                const result = await response.json();
                
                if (result.success) {
                    const profile = result.data;
                    document.getElementById('salesProfile').innerHTML = `
                        <div style="display: grid; gap: 8px;">
                            <div><strong>éŠ€è¡Œ:</strong> ${profile.bankName}</div>
                            <div><strong>å¸³è™Ÿ:</strong> ${profile.maskedBankAccountNumber}</div>
                            <div><strong>ç‹€æ…‹:</strong> 
                                <span style="color: ${profile.salesAuthorityEnabled ? 'var(--accent-3)' : 'var(--muted)'}">
                                    ${profile.salesAuthorityEnabled ? 'å·²å•Ÿç”¨' : 'å¾…å¯©æ ¸'}
                                </span>
                            </div>
                        </div>
                    `;
                    
                    document.getElementById('applyBtn').style.display = 'none';
                }
            } catch (error) {
                console.error('è¼‰å…¥éŠ·å”®æª”æ¡ˆå¤±æ•—:', error);
                document.getElementById('salesProfile').innerHTML = 
                    '<div class="error">è¼‰å…¥éŠ·å”®æª”æ¡ˆå¤±æ•—</div>';
            }
        }

        // è¼‰å…¥éŠ·å”®éŒ¢åŒ…
        async function loadSalesWallet() {
            try {
                const response = await fetch('/api/wallet/sales/wallet');
                
                if (response.status === 404) {
                    document.getElementById('salesWallet').innerHTML = 
                        '<div style="color: var(--muted);">å°šæœªé–‹é€šéŠ·å”®åŠŸèƒ½</div>';
                    return;
                }
                
                const result = await response.json();
                
                if (result.success) {
                    const wallet = result.data;
                    document.getElementById('salesWallet').innerHTML = `
                        <div style="display: grid; gap: 12px;">
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--accent-3);">
                                    $${wallet.userSalesWallet.toLocaleString()}
                                </div>
                                <div style="color: var(--muted); font-size: 0.875rem;">éŠ·å”®éŒ¢åŒ…é¤˜é¡</div>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; font-size: 0.875rem;">
                                <div>ç´¯è¨ˆéŠ·å”®: $${wallet.totalSalesAmount.toLocaleString()}</div>
                                <div>æœ¬æœˆæ”¶å…¥: $${wallet.monthlyRevenue.toLocaleString()}</div>
                                <div>å¯æé ˜: $${wallet.withdrawableAmount.toLocaleString()}</div>
                                <div>æ‰‹çºŒè²»: $${wallet.totalPlatformFees.toLocaleString()}</div>
                            </div>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('è¼‰å…¥éŠ·å”®éŒ¢åŒ…å¤±æ•—:', error);
                document.getElementById('salesWallet').innerHTML = 
                    '<div class="error">è¼‰å…¥éŠ·å”®éŒ¢åŒ…å¤±æ•—</div>';
            }
        }

        // ç”³è«‹éŠ·å”®åŠŸèƒ½
        function applySalesProfile() {
            document.getElementById('salesModal').style.display = 'flex';
        }

        // é—œé–‰ç”³è«‹å°è©±æ¡†
        function closeSalesModal() {
            document.getElementById('salesModal').style.display = 'none';
            document.getElementById('salesForm').reset();
        }

        // æäº¤éŠ·å”®ç”³è«‹
        document.getElementById('salesForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = {
                bankCode: parseInt(document.getElementById('bankCode').value),
                bankAccountNumber: document.getElementById('bankAccount').value,
                applicationReason: document.getElementById('applicationReason').value
            };
            
            try {
                const response = await fetch('/api/wallet/sales/apply', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    alert('éŠ·å”®åŠŸèƒ½ç”³è«‹å·²æäº¤ï¼Œè«‹ç­‰å¾…å¯©æ ¸');
                    closeSalesModal();
                    loadSalesProfile();
                } else {
                    alert('ç”³è«‹å¤±æ•—: ' + result.message);
                }
            } catch (error) {
                console.error('æäº¤ç”³è«‹å¤±æ•—:', error);
                alert('æäº¤ç”³è«‹å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦');
            }
        });

        // é‡æ–°æ•´ç†éŒ¢åŒ…
        function refreshWallet() {
            loadWalletData();
            loadStatistics();
            loadTransactionHistory(currentPage, currentFilters);
            loadSalesProfile();
            loadSalesWallet();
        }

        // ä¸»é¡Œåˆ‡æ›æ”¯æ´
        if (localStorage.getItem('theme') === 'dark') {
            document.body.classList.add('dark');
        }
    </script>
</body>
</html>